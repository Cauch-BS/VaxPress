********************
Command Line Options
********************

.. index:: Input/Output Options

Input/Output and Execution Options
**********************************

List of all arguments related to input/output and general execution
of the program.

- ``-h``, ``--help``

  Show help messages for VaxPress and exit.

--------------------
Input/Output Options
--------------------

==================
Required Arguments
==================

- ``-i FILE``, ``--input FILE``

  Path to the input FASTA file containing the CDS or protein sequence.

- ``-o DIR``, ``--output DIR``

  Path to the output directory.

==================
Optional Arguments
==================

- ``--protein``

  Input is a protein sequence.

- ``--overwrite``

  Overwrite output directory if it already exists.

- ``-q``, ``--quiet``

  Do not print progress messages to stdout.

- ``--print-top N``

  Print evaluation results of top ``N`` sequences at the ends of
  iterations (default: ``10``).

- ``--report-interval MIN``

  Interval of report updates in minutes. In other words, ``report.html``
  will be updated by this time interval (default: ``5``).

- ``--version``

  Show program's version number and exit.

.. index:: Execution Options
.. _execution options:

-----------------
Execution Options
-----------------

- ``-p N``, ``--processes N``

  Number of processes to use (default: ``4``).

- ``--preset FILE``
  
  Use pre-defined options stored in ``FILE``, which has the same
  format and content as the ``parameters.json`` file generated by
  a VaxPress run.  Any options specified in the command line will
  supersede these preset values.

  Example command to use a preset file::

    vaxpress -i spike.fa -o output \
             --preset parameters.json

  Refer to :ref:`label-preset` for more information.

- ``--addon FILE``

  Load a custom fitness function.

  Example command to use a custom fitness function::

    vaxpress -i input.fa -o output_dir \
             --iterations 1000 -p 36 \
             --addon myfunction.py

  Please refer to the :ref:`label-addon` section of this documentation
  for detailed instructions on using a custom fitness function.

- ``--seed NUMBER``

  Alter the random seed ``NUMBER`` to generate a different sequence
  under the same settings (default: ``922``).

- ``--folding-engine NAME``

  RNA folding engine: ``vienna`` or ``linearfold`` (default: ``vienna``).
  ``linearfold`` is only available when a separate Python package,
  `linearfold-unofficial <https://pypi.org/project/linearfold-unofficial/>`_,
  is installed.

- ``--default-off``

  Disable all fitness functions by default. This is useful
  when you wish to activate only a select few fitness functions.


.. index:: Optimization Options

Optimization Options
********************

The following is a list of parameters related to the program's
optimization processes. Refer to the :ref:`tuning-parameters` section
for examples demonstrating the impact of each parameter on the
optimization process.

- ``--random-initialization``

  Randomize all codon selections at the beginning (default: not set).

.. _label-constart:

- ``--conservative-start ITER[:WIDTH]``
  
  Mutate the codon selections for the initial ``WIDTH`` amino acids
  only during the first ``ITER`` iterations.  It is particularly
  useful when the input sequence is partially optimized, like when
  it's generated by *LinearDesign.* By default, ``ITER`` and ``WIDTH``
  are set to ``0`` and ``7``, respectively.

  .. code-block:: bash

    # Example command line to use --conservative-start option
    vaxpress -i spike.fa -o output \
             --iterations 1000 \
             --lineardesign 1 \
             --conservative-start 10:7

- ``--iterations N``

  Number of iterations (default: ``10``). See :doc:`algorithmic_details`
  to understand how this parameter affect the optimization process.

- ``--population N``

  Population size to generate every iteration (default: ``20``).

- ``--survivors N``

  Number of survivors to pass to the next iteration (default: ``2``).

- ``--initial-mutation-rate RATE``

  Initial mutation rate (default: ``0.1``).

- ``--full-scan-interval N``
  
  Number of iterations between full scans of single mutations of
  unpaired bases (default: ``300``).

- ``--winddown-trigger N``

  Decrease the mutation rate if there's no improvement in the best
  fitness score for ``N`` iterations (default: ``15``). For a
  comprehensive explanation, please refer to :ref:`label_WinddownTR`.

- ``--winddown-rate RATE``

  The mutation rate multiplier that controls the mutation
  rate when the best fitness score stagnates. The default value is
  ``0.9``. For a comprehensive explanation, please refer to the section
  labeled :ref:`label_WinddownTR`.

- ``--boost-loop-mutations WEIGHT[:START]``

  Increase the weight of mutations in loop regions by a factor
  of ``WEIGHT`` compared to stem regions. This amplification does not
  affect the initial part of the sequence preceding ``START``, reducing
  the influence of the unstructured region near the start codon. The
  default settings are ``1.5:15``.

- ``--species NAME``

  Target species (default: human).

- ``--codon-table NAME``

  Codon table to identify synonymous codons (default: ``standard``). Codon
  tables are imported from `Bio.Data.CodonTable module
  <https://biopython.org/docs/latest/api/Bio.Data.CodonTable.html>`_. To
  check for the full list of supported codon tables, please refer
  to `BioPython source code
  <https://github.com/biopython/biopython/blob/master/Bio/Data/CodonTable.py>`_.

.. index:: LinearDesign; Options
.. _label-linopts:

*LinearDesign*-related Options 
******************************

- ``--lineardesign LAMBDA``

  Invoke *LinearDesign* to initialize the optimization.
  The parameter ``LAMBDA`` (λ) determines the balance between MFE and
  CAI in the *LinearDesign* optimization. You can set λ to ``0`` if
  you want to focus solely on MFE. Increasing the value of λ will
  subsequently enhance the emphasis on CAI.

- ``--lineardesign-dir DIR``

  Path to the top directory containing *LinearDesign.* Once this argument
  is provided, the path will be saved in the :ref:`persistent
  configuration <label-configuration>` in VaxPress. You can omit this
  argument from the next time if you're using the same *LinearDesign.*

- ``--lineardesign-omit-start AA``

  Number of amino acids to exclude from the N-terminus for
  *LinearDesign* invocation (default: ``5``). This setting helps
  prevent the generation of a strong secondary structure near the
  start codon region, which can interfere with efficient translation
  initiation.


.. index:: Fitness Function Options

Options Related to Fitness Functions
************************************

List of all arguments related to fitness functions inside VaxPress.
For detailed information on how each scoring function works, see
:doc:`scoring_functions`.

.. _options-iCodon:

------------------------------------
Predicted In-Cell Stability (iCodon)
------------------------------------

- ``--iCodon-weight WEIGHT``
  
  Scoring weight for iCodon predicted stability (default: ``1.0``).

.. _options-DegScore:

------------------------------------------
Predicted In-Solution Stability (DegScore)
------------------------------------------

- ``--degscore-weight WEIGHT``
  
  Scoring weight for predicted in-solution degradation (*DegScore*).
  To optimize the sequence for minimal *DegScore*, set ``WEIGHT``
  to a positive value. The default weight is ``0.0``. However, if
  you wish to incorporate this factor into the optimization process,
  a starting weight value of ``5.0`` is recommended.

.. _options-CAI:

----------------------
Codon Adaptation Index
----------------------

- ``--cai-weight WEIGHT``
  
  Scoring weight for codon adaptation index (CAI) of single codons
  (default: ``0.0``).

.. _options-bicodon:

-------------------------------------
Codon Adaptation Index of Codon-Pairs
-------------------------------------

- ``--bicodon-weight WEIGHT``
  
  Scoring weight for codon adaptation index (CAI) of codon-pairs
  (default: ``1.0``).

.. _options-ucount:

--------------------
Simple Uridine Count
--------------------

- ``--ucount-weight WEIGHT``
  
  Scoring weight for U count minimizer (default: ``3.0``).

-----------
RNA Folding
-----------

.. _options-MFE:

=========================
Minimum Free Energy (MFE)
=========================

- ``--mfe-weight WEIGHT``
  
  Scoring weight for Minimum Free Energy (MFE) (default: ``3.0``).

.. _options-loops:

=====
Loops
=====

- ``--loop-weight WEIGHT``
  
  Scoring weight for total loop length (default: ``1.5``).

- ``--loop-threshold N``
  
  Minimum count of consecutive unfolded bases to be considered as
  a loop (default: ``2``).

.. _options-startstr:

==========================
Structure near Start Codon
==========================

- ``--start-str-weight WEIGHT``
  
  Penalty weight for structured start codon region (default: ``1``).

- ``--start-str-width WIDTH``
  
  Width in nt of unfolded region near the start codon (default: ``15``).

.. _options-longstems:

==========
Long Stems
==========

- ``--longstem-weight WEIGHT``
  
  Penalty score for long stems (default: ``100.0``).

- ``--longstem-threshold N``
  
  Minimum length of stems to avoid (default: ``27``).

.. _options-gc:

----------------
Local GC Content
----------------

- ``--gc-weight WEIGHT``
  
  Scoring weight for GC ratio (default: ``3.0``).

- ``--gc-window-size SIZE``
  
  Size of window for GC content calculation (default: ``50``).

- ``--gc-stride STRIDE``
  
  Size of stride for GC content calculation (default: ``5``).

.. _options-repeats:

--------------
Tandem Repeats
--------------

- ``--repeats-weight WEIGHT``
  
  Scoring weight for tandem repeats (default: ``1.0``).

- ``--repeats-min-repeats N``
  
  Minimum number of repeats to be considered as a tandem repeat
  (default: ``2``).

- ``--repeats-min-length LENGTH``
  
  Minimum length of repeats to be considered as a tandem repeat
  (default: ``10``).